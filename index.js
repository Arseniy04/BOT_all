const TelegramBot = require('node-telegram-bot-api');

const token = '6334457411:AAGFFmCL_JSaN6BAeMicY9So0fG5st1L49w'

const bot = new TelegramBot(token, { polling: true });


const mainKeyboard = {
    reply_markup: {
        keyboard: [
            [{ text: 'üìä ECN –°—á–µ—Ç' }],
            [{ text: 'üíº –õ–∏—á–Ω—ã–π –ö–∞–±–∏–Ω–µ—Ç' }],
            [{ text: '‚öôÔ∏è –¢–µ—Ö.–ü–æ–¥–¥–µ—Ä–∂–∫–∞' }]
        ],
        resize_keyboard: true,
        one_time_keyboard: false
    }
};

const menuKeyboard = {
    reply_markup: {
        keyboard: [
            [{ text: 'üìä ECN –°—á–µ—Ç' }],
            [{ text: 'üíº –õ–∏—á–Ω—ã–π –ö–∞–±–∏–Ω–µ—Ç' }],
            [{ text: '‚öôÔ∏è –¢–µ—Ö.–ü–æ–¥–¥–µ—Ä–∂–∫–∞' }]
        ],
        resize_keyboard: true,
        one_time_keyboard: true
    }
};

const usersActivated = new Set();

function generateLkKeyboard() {
    return {
        reply_markup: {
            inline_keyboard: [
                [{ text: 'üí≥ –ü–æ–ø–æ–ª–Ω–∏—Ç—å', callback_data: 'deposit' }, { text: 'üí∏ –í—ã–≤–µ—Å—Ç–∏', callback_data: 'withdraw' }],
                [{ text: 'üîí –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è', callback_data: 'verification' }],
                [{ text: '‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏', callback_data: 'settings' }]
            ]
        }
    };
}

function generateDepKeyboard() {
    return {
        reply_markup: {
            inline_keyboard: [
                [{ text: 'üí≥ –ü–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–Ω–∫–æ–≤—Å–∫–æ–π –∫–∞—Ä—Ç–æ–π', callback_data: 'deposit_with_card' }],
                [{ text: 'üí∞ –ü–æ–ø–æ–ª–Ω–∏—Ç—å –∫–∏–≤–∏ –∫–æ—à–µ–ª—å–∫–æ–º', callback_data: 'deposit_with_wallet' }],
            ]
        }
    };
}



bot.setMyCommands([
    { command: '/start', description: '–ó–∞–ø—É—Å–∫ –±–æ—Ç–∞' },
    { command: '/help', description: '–ü–æ–º–æ—â—å' },
]);

bot.on('message', async (msg) => {
    const text = msg.text;
    const chatId = msg.chat.id;
    const userId = msg.from.id;

    if (text === '/start') {
        const username = msg.from.username;
        if (!usersActivated.has(chatId)) {
            usersActivated.add(chatId);
            bot.sendMessage(chatId, `üéâ –ü—Ä–∏–≤–µ—Ç, @${username}!\n` +
                '–ü–æ–ª–∏—Ç–∏–∫–∞ –∏ —É—Å–ª–æ–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã–º –±–æ—Ç–æ–º.\n' +
                '1. –ü–µ—Ä–µ–¥ –ø—Ä–∏–Ω—è—Ç–∏–µ–º –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–æ–Ω–Ω–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è –ò–Ω–≤–µ—Å—Ç–æ—Ä—É –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –æ—Ü–µ–Ω–∏—Ç—å —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–µ —Ä–∏—Å–∫–∏ –∏ –≤—ã–≥–æ–¥—ã, –Ω–∞–ª–æ–≥–æ–≤—ã–µ, —é—Ä–∏–¥–∏—á–µ—Å–∫–∏–µ, –±—É—Ö–≥–∞–ª—Ç–µ—Ä—Å–∫–∏–µ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è –∑–∞–∫–ª—é—á–µ–Ω–∏—è —Å–¥–µ–ª–∫–∏, —Å–≤–æ—é –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–∏–Ω—è—Ç—å —Ç–∞–∫–∏–µ —Ä–∏—Å–∫–∏. –ö–ª–∏–µ–Ω—Ç —Ç–∞–∫–∂–µ –Ω–µ—Å–µ—Ç —Ä–∞—Å—Ö–æ–¥—ã –Ω–∞ –æ–ø–ª–∞—Ç—É –±—Ä–æ–∫–µ—Ä—Å–∫–∏—Ö –∏ –¥–µ–ø–æ–∑–∏—Ç–∞—Ä–Ω—ã—Ö —É—Å–ª—É–≥\n' +
                '2. –ü—Ä–∏–Ω–∏–º–∞—è –ø—Ä–∞–≤–∏–ª–∞, –í—ã –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç–µ —Å–≤–æ—ë —Å–æ–≥–ª–∞—Å–∏–µ —Å–æ –≤—Å–µ–º–∏ –≤—ã—à–µ–ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω—ã–º–∏ –ø—Ä–∞–≤–∏–ª–∞–º–∏!\n' +
                '3. –í–∞—à –∞–∫–∫–∞—É–Ω—Ç –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –≤ –ø–æ–¥–æ–∑—Ä–µ–Ω–∏–∏ –Ω–∞ –º–æ—à–µ–Ω–Ω–∏—á–µ—Å—Ç–≤–æ/–æ–±–º–∞–Ω –Ω–∞—à–µ–π —Å–∏—Å—Ç–µ–º—ã! –ö–∞–∂–¥–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –Ω–µ–æ–±—Ö–æ–¥–∏–º–∞ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–ª—è –≤—ã–≤–æ–¥–∞ –∫—Ä—É–ø–Ω–æ–π —Å—É–º–º—ã —Å—Ä–µ–¥—Å—Ç–≤.\–Ω' +
                '4. –ú—É–ª—å—Ç–∏–∞–∫–∫–∞—É–Ω—Ç—ã –∑–∞–ø—Ä–µ—â–µ–Ω—ã!\n' +
                '5. –°–∫—Ä–∏–ø—Ç—ã, —Å—Ö–µ–º—ã, —Ç–∞–∫—Ç–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∑–∞–ø—Ä–µ—â–µ–Ω–æ!\n' +
                '6. –ï—Å–ª–∏ –±—É–¥—É—Ç –≤—ã—è–≤–ª–µ–Ω—ã –≤—ã—à–µ–ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω—ã–µ —Å–ª—É—á–∞–∏, –í–∞—à –∞–∫–∫–∞—É–Ω—Ç –±—É–¥–µ—Ç –∑–∞–º–æ—Ä–æ–∂–µ–Ω –¥–æ –≤—ã—è—Å–Ω–µ–Ω–∏—è –æ–±—Å—Ç–æ—è—Ç–µ–ª—å—Å—Ç–≤!\n' +
                '7. –í —Å–ª—É—á–∞–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏—è –∏–º–µ–µ—Ç –ø—Ä–∞–≤–æ –∑–∞–ø—Ä–æ—Å–∏—Ç—å —É –í–∞—Å –¥–æ–∫—É–º–µ–Ω—Ç—ã, –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é—â–∏–µ –í–∞—à—É –ª–∏—á–Ω–æ—Å—Ç—å –∏ –í–∞—à–µ —Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ–ª–µ—Ç–∏–µ.\n' +
                '\n' +
                '–ü–æ –≤—Å–µ–º –≤–æ–ø—Ä–æ—Å–∞–º –í—ã–≤–æ–¥–∞ —Å—Ä–µ–¥—Å—Ç–≤, –ø–æ –≤–æ–ø—Ä–æ—Å–∞–º –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è, –∞ —Ç–∞–∫ –∂–µ –≤–æ–ø—Ä–æ—Å–∞–º –∏–≥—Ä—ã –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É, —É–∫–∞–∑–∞–Ω–Ω—É—é –≤ –æ–ø–∏—Å–∞–Ω–∏–∏ –∫ –±–æ—Ç—É.\n' +
                '\n' +
                '–°–ø–∞—Å–∏–±–æ –∑–∞ –ø–æ–Ω–∏–º–∞–Ω–∏–µ, –í–∞—à ¬´@BingX_wallet_bot¬ª', {
                reply_markup: {
                    inline_keyboard: [
                        [{ text: '–ü—Ä–∏–Ω—è—Ç—å ‚úì', callback_data: 'accept' }]
                    ]
                }
            });
        } else {
            bot.sendMessage(chatId, 'üñ• –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç\n' +
                '\n' +
                '‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ\n' +
                `–í–∞—à ID: ${userId}\n` +
                '–í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è: ‚úÖ –í–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω\n' +
                '–°—Ç–∞—Ç—É—Å: –ü–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–π\n' +
                '‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ\n' +
                'üí∞ –ë–∞–ª–∞–Ω—Å : 4900000 ‚ÇΩ\n' +
                'üìÇ –ù–∞ –≤—ã–≤–æ–¥–µ : 0 ‚ÇΩ\n' +
                '‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ\n' +
                'üìä –í—Å–µ–≥–æ —Å–¥–µ–ª–æ–∫ : 2\n' +
                '\n' +
                '‚úÖ –£—Å–ø–µ—à–Ω—ã—Ö —Å–¥–µ–ª–æ–∫ : 2\n' +
                '‚ùå –ù–µ—É—Å–ø–µ—à–Ω—ã—Ö —Å–¥–µ–ª–æ–∫ : 0\n' +
                '‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ\n' +
                'üìù –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω: 24 –¥.\n' +
                '‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ\n' +
                '\n' +
                '‚ö†Ô∏è –ù–∞—à–∞ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ - @alinkamurcc. –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ø–∏—à—É—Ç –≤–∞–º –ø–µ—Ä–≤—ã–º–∏.', generateLkKeyboard());
        }
    }

    if (text === '/wallet' || text === 'üìä ECN –°—á–µ—Ç') {
        bot.sendPhoto(chatId, 'https://imgur.com/a/VWrcPFn', {
            caption: 'üìä ECN —Å—á—ë—Ç\n–í—ã–±–µ—Ä–∏—Ç–µ –º–æ–Ω–µ—Ç—É –¥–ª—è –∏–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–µ–Ω–µ–∂–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤'
        });
    }

    if (text === '/lk' || text === 'üíº –õ–∏—á–Ω—ã–π –ö–∞–±–∏–Ω–µ—Ç') {
        bot.sendMessage(chatId, 'üñ• –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç\n' +
            '\n' +
            '‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ\n' +
            `–í–∞—à ID: ${userId}\n` +
            '–í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è: ‚úÖ –í–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω\n' +
            '–°—Ç–∞—Ç—É—Å: –ü–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–π\n' +
            '‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ\n' +
            'üí∞ –ë–∞–ª–∞–Ω—Å : 4900000 ‚ÇΩ\n' +
            'üìÇ –ù–∞ –≤—ã–≤–æ–¥–µ : 0 ‚ÇΩ\n' +
            '‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ\n' +
            'üìä –í—Å–µ–≥–æ —Å–¥–µ–ª–æ–∫ : 2\n' +
            '\n' +
            '‚úÖ –£—Å–ø–µ—à–Ω—ã—Ö —Å–¥–µ–ª–æ–∫ : 2\n' +
            '‚ùå –ù–µ—É—Å–ø–µ—à–Ω—ã—Ö —Å–¥–µ–ª–æ–∫ : 0\n' +
            '‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ\n' +
            'üìù –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω: 24 –¥.\n' +
            '‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ\n' +
            '\n' +
            '‚ö†Ô∏è –ù–∞—à–∞ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ - @alinkamurcc. –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ø–∏—à—É—Ç –≤–∞–º –ø–µ—Ä–≤—ã–º–∏.', generateLkKeyboard());
    }

    if (text === '/support' || text === '‚öôÔ∏è –¢–µ—Ö.–ü–æ–¥–¥–µ—Ä–∂–∫–∞') {
        bot.sendMessage(chatId, '‚öôÔ∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞\n' +
            '\n' +
            '–î–ª—è –æ–±—Ä–∞—â–µ–Ω–∏—è –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É –ø—Ä–æ—á–∏—Ç–∞–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –Ω–∏–∂–µ.\n' +
            '\n' +
            '1. –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –æ–±—Ä–∞—â–µ–Ω–∏–∏ —É–∫–∞–∂–∏—Ç–µ –≤–∞—à ID\n' +
            '2.–û–ø–∏—à–∏—Ç–µ –ø–æ–¥—Ä–æ–±–Ω–µ–µ —á—Ç–æ —É –≤–∞—Å —Å–ª—É—á–∏–ª–æ—Å—å\n' +
            '3.–í—ã–ø–æ–ª–Ω—è–π—Ç–µ –≤—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –∞–≥–µ–Ω—Ç–∞ –≤ —Ö—É–¥—à–µ–º —Å–ª—É—á–∞–µ –æ–Ω –±—É–¥–µ—Ç –≤—ã–Ω—É–∂–¥–µ–Ω –ø–æ–∫–∏–Ω—É—Ç—å —á–∞—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏.', {
            reply_markup: {
                inline_keyboard: [
                    [{ text: '–û–±—Ä–∞—Ç–∏—Ç—å—Å—è –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É', url: 'https://t.me/alinkamurcc' }]
                ]
            }
        });
    }
});

bot.on('callback_query', async (query) => {
    const chatId = query.message.chat.id;
    const messageId = query.message.message_id;
    const userId = query.from.id;

    if (query.data === 'accept') {
        await bot.deleteMessage(chatId, messageId).catch((error) => {
            console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏—è:", error);
        });

        bot.sendMessage(chatId, 'üñ• –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç\n' +
            '\n' +
            '‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ\n' +
            `–í–∞—à ID: ${userId}\n` +
            '–í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è: ‚úÖ –í–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω\n' +
            '–°—Ç–∞—Ç—É—Å: –ü–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–π\n' +
            '‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ\n' +
            'üí∞ –ë–∞–ª–∞–Ω—Å : 4900000 ‚ÇΩ\n' +
            'üìÇ –ù–∞ –≤—ã–≤–æ–¥–µ : 0 ‚ÇΩ\n' +
            '‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ\n' +
            'üìä –í—Å–µ–≥–æ —Å–¥–µ–ª–æ–∫ : 2\n' +
            '\n' +
            '‚úÖ –£—Å–ø–µ—à–Ω—ã—Ö —Å–¥–µ–ª–æ–∫ : 2\n' +
            '‚ùå –ù–µ—É—Å–ø–µ—à–Ω—ã—Ö —Å–¥–µ–ª–æ–∫ : 0\n' +
            '‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ\n' +
            'üìù –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω: 24 –¥.\n' +
            '‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ\n' +
            '\n' +
            '‚ö†Ô∏è –ù–∞—à–∞ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ - @alinkamurcc. –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ø–∏—à—É—Ç –≤–∞–º –ø–µ—Ä–≤—ã–º–∏.',
            generateLkKeyboard()
        );
    } else if (query.data === 'deposit') {
        bot.sendMessage(chatId, 'üí∞ –í—ã–±–µ—Ä–∏—Ç–µ –º–µ—Ç–æ–¥ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è —á–µ—Ä–µ–∑ –∫–æ—Ç–æ—Ä—ã–π –í—ã —Ö–æ—Ç–∏—Ç–µ —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ.', generateDepKeyboard());
    } else if (query.data === 'deposit_with_card') {
        bot.sendMessage(chatId, '–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è –±–∞–Ω–∫–æ–≤—Å–∫–æ–π –∫–∞—Ä—Ç–æ–π:\n' +
            '\n' +
            '–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ - [–ú–ò–ù–ò–ú–ê–õ–¨–ù–ê–Ø_–°–£–ú–ú–ê]');
    } else if (query.data === 'deposit_with_wallet') {
        bot.sendMessage(chatId, '–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è –∫–∏–≤–∏ –∫–æ—à–µ–ª—å–∫–æ–º:\n' +
            '\n' +
            '–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ - [–ú–ò–ù–ò–ú–ê–õ–¨–ù–ê–Ø_–°–£–ú–ú–ê]');
    }

    bot.answerCallbackQuery(query.id);
});


